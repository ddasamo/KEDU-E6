<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>경동초 맞춤형 영어교육 프로그램</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo } = React;

        // 상수 데이터
        const VOCABULARY = [
            { present: "go", past: "went", korean: "가다" },
            { present: "come", past: "came", korean: "오다" },
            { present: "eat", past: "ate", korean: "먹다" },
            { present: "drink", past: "drank", korean: "마시다" },
            { present: "see", past: "saw", korean: "보다" },
            { present: "hear", past: "heard", korean: "듣다" },
            { present: "speak", past: "spoke", korean: "말하다" },
            { present: "write", past: "wrote", korean: "쓰다" },
            { present: "read", past: "read", korean: "읽다" },
            { present: "run", past: "ran", korean: "달리다" },
            { present: "walk", past: "walked", korean: "걷다" },
            { present: "sleep", past: "slept", korean: "자다" },
            { present: "wake", past: "woke", korean: "깨다" },
            { present: "sit", past: "sat", korean: "앉다" },
            { present: "stand", past: "stood", korean: "서다" }
        ];

        const SENTENCE_QUESTIONS = [
            {
                korean: "나는 어제 공원에 갔다.",
                answer: "I went to the park yesterday.",
                scrambled: ["yesterday", "park", "went", "to", "the", "I"]
            },
            {
                korean: "그녀는 아침에 우유를 마셨다.",
                answer: "She drank milk in the morning.",
                scrambled: ["morning", "drank", "milk", "She", "in", "the"]
            },
            {
                korean: "우리는 영화를 봤다.",
                answer: "We saw a movie.",
                scrambled: ["saw", "We", "a", "movie"]
            },
            {
                korean: "그는 책을 읽었다.",
                answer: "He read a book.",
                scrambled: ["read", "He", "book", "a"]
            },
            {
                korean: "나는 친구와 이야기했다.",
                answer: "I spoke with my friend.",
                scrambled: ["spoke", "with", "I", "my", "friend"]
            }
        ];

        // 앱 상태
        const ResultState = { IDLE: 'IDLE', CORRECT: 'CORRECT', INCORRECT: 'INCORRECT' };
        const QuizMode = { PRESENT_TO_PAST: 'PRESENT_TO_PAST', PAST_TO_PRESENT: 'PAST_TO_PRESENT' };
        const AppMode = { START: 'START', WORD_QUIZ: 'WORD_QUIZ', SENTENCE_QUIZ: 'SENTENCE_QUIZ' };

        // 유틸리티 함수
        const shuffleArray = (array) => [...array].sort(() => Math.random() - 0.5);
        const getRandomQuizMode = () => Math.random() < 0.5 ? QuizMode.PRESENT_TO_PAST : QuizMode.PAST_TO_PRESENT;

        // 아이콘 컴포넌트들
        const CheckIcon = () => React.createElement('svg', {
            className: "h-8 w-8", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor"
        }, React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M5 13l4 4L19 7" }));

        const CrossIcon = ({ className = "" }) => React.createElement('svg', {
            className: `h-6 w-6 ${className}`, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor"
        }, React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M6 18L18 6M6 6l12 12" }));

        const SpeakerIcon = () => React.createElement('svg', {
            className: "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor"
        }, React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" }));

        const BackArrowIcon = () => React.createElement('svg', {
            className: "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor"
        }, React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M15 19l-7-7 7-7" }));

        // 시작 화면
        const StartScreen = ({ onSelectMode }) => React.createElement('div', { className: "w-full max-w-xl mx-auto text-center" },
            React.createElement('div', { className: "bg-white rounded-2xl shadow-2xl p-6 md:p-10" }, [
                React.createElement('h1', { key: "title", className: "text-4xl md:text-5xl font-bold text-slate-800 mb-2" }, "English Practice"),
                React.createElement('p', { key: "subtitle", className: "text-slate-600 mt-2 mb-8" }, "Choose an activity to start."),
                React.createElement('div', { key: "buttons", className: "space-y-4" }, [
                    React.createElement('button', {
                        key: "word-quiz",
                        onClick: () => onSelectMode(AppMode.WORD_QUIZ),
                        className: "w-full py-4 px-6 bg-indigo-600 text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700 transition-transform transform hover:scale-105"
                    }, "단어 익히기 (Learn Words)"),
                    React.createElement('button', {
                        key: "sentence-quiz",
                        onClick: () => onSelectMode(AppMode.SENTENCE_QUIZ),
                        className: "w-full py-4 px-6 bg-teal-600 text-white font-bold text-xl rounded-lg shadow-md hover:bg-teal-700 transition-transform transform hover:scale-105"
                    }, "문장 만들기 (Make Sentences)")
                ])
            ])
        );

        // 단어 퀴즈 컴포넌트
        const WordQuiz = ({ onBack }) => {
            const [words, setWords] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [userInput, setUserInput] = useState('');
            const [result, setResult] = useState(ResultState.IDLE);
            const [showHint, setShowHint] = useState(false);
            const [isFinished, setIsFinished] = useState(false);
            const [quizMode, setQuizMode] = useState(getRandomQuizMode());

            useEffect(() => {
                setWords(shuffleArray(VOCABULARY));
                setQuizMode(getRandomQuizMode());
            }, []);

            const currentWord = useMemo(() => words[currentIndex], [words, currentIndex]);

            const generateHint = useCallback((word) => {
                const length = word.length;
                if (length <= 2) return `${word[0]} _`;
                if (length === 3) return `${word[0]} _ ${word[2]}`;
                return `${word[0]} ${'_ '.repeat(length - 2)}${word[length-1]}`;
            }, []);

            const handleSpeak = (text) => {
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.9;
                    window.speechSynthesis.speak(utterance);
                }
            };

            const handleCheckAnswer = (e) => {
                e.preventDefault();
                if (!userInput.trim()) return;
                const correctAnswer = quizMode === QuizMode.PRESENT_TO_PAST ? currentWord.past : currentWord.present;
                const isCorrect = correctAnswer.toLowerCase().includes(userInput.trim().toLowerCase());
                setResult(isCorrect ? ResultState.CORRECT : ResultState.INCORRECT);
                setShowHint(false);
            };

            const handleNextWord = () => {
                if (currentIndex < words.length - 1) {
                    setCurrentIndex(currentIndex + 1);
                } else {
                    setIsFinished(true);
                }
                setUserInput('');
                setResult(ResultState.IDLE);
                setShowHint(false);
                setQuizMode(getRandomQuizMode());
            };

            const handleRestart = () => {
                setWords(shuffleArray(VOCABULARY));
                setCurrentIndex(0);
                setUserInput('');
                setResult(ResultState.IDLE);
                setShowHint(false);
                setIsFinished(false);
                setQuizMode(getRandomQuizMode());
            };

            if (words.length === 0 || !currentWord) {
                return React.createElement('div', { className: "text-xl" }, "Loading...");
            }

            if (isFinished) {
                return React.createElement('div', { className: "text-center p-10 rounded-2xl shadow-2xl bg-white" }, [
                    React.createElement('h1', { key: "title", className: "text-5xl font-bold mb-4" }, "Congratulations!"),
                    React.createElement('p', { key: "subtitle", className: "text-2xl mb-8" }, "You have completed all the words."),
                    React.createElement('button', { key: "restart", onClick: handleRestart, className: "px-8 py-4 bg-yellow-400 text-indigo-800 font-bold rounded-xl shadow-lg hover:bg-yellow-300" }, "Start Over")
                ]);
            }

            const isPresentToPast = quizMode === QuizMode.PRESENT_TO_PAST;
            const questionWord = isPresentToPast ? currentWord.present : currentWord.past;
            const answerWord = isPresentToPast ? currentWord.past : currentWord.present;

            return React.createElement('div', { className: "w-full max-w-xl mx-auto" }, [
                React.createElement('header', { key: "header", className: "text-center mb-8 relative" }, [
                    React.createElement('button', { key: "back", onClick: onBack, className: "absolute left-0 top-1/2 -translate-y-1/2 p-2 rounded-full hover:bg-slate-200" }, React.createElement(BackArrowIcon)),
                    React.createElement('h1', { key: "title", className: "text-4xl md:text-5xl font-bold text-slate-800" }, "Vocabulary Quiz")
                ]),
                React.createElement('div', { key: "content", className: "bg-white rounded-2xl shadow-2xl p-6 md:p-10" }, [
                    React.createElement('div', { key: "progress", className: "mb-8" }, [
                        React.createElement('div', { key: "progress-text", className: "flex justify-between items-center mb-2 text-slate-600" }, [
                            React.createElement('span', { key: "label" }, "Progress"),
                            React.createElement('span', { key: "count" }, `Word ${currentIndex + 1} / ${words.length}`)
                        ]),
                        React.createElement('div', { key: "progress-bar", className: "w-full bg-slate-200 rounded-full h-4" },
                            React.createElement('div', { className: "bg-indigo-500 h-4 rounded-full", style: { width: `${((currentIndex + 1) / words.length) * 100}%` } })
                        )
                    ]),
                    React.createElement('div', { key: "quiz", className: "text-center" }, [
                        React.createElement('p', { key: "question-type", className: "text-lg text-slate-500 mb-2" }, isPresentToPast ? 'Present (현재형)' : 'Past (과거형)'),
                        React.createElement('div', { key: "question-word", className: "bg-slate-100 rounded-lg p-4 mb-4" }, [
                            React.createElement('p', { key: "word", className: "text-5xl font-bold text-indigo-700" }, questionWord),
                            React.createElement('p', { key: "korean", className: "text-2xl text-slate-600 mt-1" }, currentWord.korean)
                        ]),
                        React.createElement('p', { key: "answer-type", className: "text-lg text-slate-500 mb-2" }, isPresentToPast ? 'Past (과거형)' : 'Present (현재형)'),
                        React.createElement('form', { key: "form", onSubmit: handleCheckAnswer }, [
                            React.createElement('input', {
                                key: "input", type: "text", value: userInput, onChange: (e) => setUserInput(e.target.value),
                                placeholder: "Type the answer...", disabled: result === ResultState.CORRECT,
                                className: "w-full p-4 text-2xl text-center border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500", autoFocus: true
                            }),
                            result !== ResultState.CORRECT && React.createElement('button', {
                                key: "submit", type: "submit",
                                className: "w-full mt-4 py-4 bg-indigo-600 text-white font-bold text-xl rounded-lg shadow-md hover:bg-indigo-700"
                            }, "Check Answer")
                        ]),
                        React.createElement('div', { key: "result", className: "mt-6 min-h-[150px]" }, [
                            result === ResultState.CORRECT && React.createElement('div', { key: "correct", className: "text-green-600 bg-green-100 p-4 rounded-lg space-y-4" }, [
                                React.createElement('div', { key: "correct-header", className: "flex items-center justify-center" }, [
                                    React.createElement(CheckIcon, { key: "check" }),
                                    React.createElement('p', { key: "text", className: "font-bold text-2xl ml-2" }, "Correct!")
                                ]),
                                React.createElement('div', { key: "word-info", className: "text-left text-slate-800 space-y-2" }, [
                                    React.createElement('div', { key: "present", className: "flex justify-between items-center bg-white p-3 rounded-lg" }, [
                                        React.createElement('p', { key: "present-text" }, [
                                            React.createElement('span', { key: "label", className: "text-sm text-slate-500" }, "현재형: "),
                                            React.createElement('strong', { key: "word", className: "text-2xl" }, currentWord.present)
                                        ]),
                                        React.createElement('button', { key: "speak", onClick: () => handleSpeak(currentWord.present), className: "p-2 rounded-full hover:bg-slate-200" }, React.createElement(SpeakerIcon))
                                    ]),
                                    React.createElement('div', { key: "past", className: "flex justify-between items-center bg-white p-3 rounded-lg" }, [
                                        React.createElement('p', { key: "past-text" }, [
                                            React.createElement('span', { key: "label", className: "text-sm text-slate-500" }, "과거형: "),
                                            React.createElement('strong', { key: "word", className: "text-2xl" }, currentWord.past)
                                        ]),
                                        React.createElement('button', { key: "speak", onClick: () => handleSpeak(currentWord.past), className: "p-2 rounded-full hover:bg-slate-200" }, React.createElement(SpeakerIcon))
                                    ])
                                ]),
                                React.createElement('button', { key: "next", onClick: handleNextWord, className: "w-full mt-2 py-4 bg-green-600 text-white font-bold text-xl rounded-lg shadow-md hover:bg-green-700" }, "Next Word")
                            ]),
                            result === ResultState.INCORRECT && React.createElement('div', { key: "incorrect", className: "text-red-600 bg-red-100 p-4 rounded-lg" }, [
                                React.createElement(CrossIcon, { key: "cross", className: "mx-auto" }),
                                React.createElement('p', { key: "text", className: "font-bold text-xl mt-1" }, "Try again!"),
                                !showHint && React.createElement('button', { key: "hint-btn", onClick: () => setShowHint(true), className: "mt-2 text-sm text-indigo-600 hover:underline" }, "Show Hint"),
                                showHint && React.createElement('div', { key: "hint", className: "mt-2 text-lg font-mono tracking-widest bg-yellow-100 text-yellow-800 p-2 rounded" }, generateHint(answerWord))
                            ])
                        ])
                    ])
                ])
            ]);
        };

        // 문장 퀴즈 컴포넌트
        const SentenceQuiz = ({ onBack }) => {
            const [questions, setQuestions] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [userInput, setUserInput] = useState('');
            const [result, setResult] = useState(ResultState.IDLE);
            const [showHint, setShowHint] = useState(false);
            const [isFinished, setIsFinished] = useState(false);

            useEffect(() => {
                setQuestions(shuffleArray(SENTENCE_QUESTIONS));
            }, []);

            const currentQuestion = useMemo(() => questions[currentIndex], [questions, currentIndex]);
            const normalizeAnswer = (str) => str.toLowerCase().replace(/[.,?]/g, '').replace(/\s+/g, ' ').trim();

            const handleCheckAnswer = (e) => {
                e.preventDefault();
                if (!userInput.trim()) return;
                const isCorrect = normalizeAnswer(userInput) === normalizeAnswer(currentQuestion.answer);
                setResult(isCorrect ? ResultState.CORRECT : ResultState.INCORRECT);
                setShowHint(false);
            };

            const handleNextQuestion = () => {
                if (currentIndex < questions.length - 1) {
                    setCurrentIndex(currentIndex + 1);
                } else {
                    setIsFinished(true);
                }
                setUserInput('');
                setResult(ResultState.IDLE);
                setShowHint(false);
            };

            const handleRestart = () => {
                setQuestions(shuffleArray(SENTENCE_QUESTIONS));
                setCurrentIndex(0);
                setUserInput('');
                setResult(ResultState.IDLE);
                setShowHint(false);
                setIsFinished(false);
            };

            const generateHint = useCallback(() => {
                return currentQuestion ? `Sentence starts with "${currentQuestion.answer.split(' ')[0]}".` : '';
            }, [currentQuestion]);

            if (questions.length === 0 || !currentQuestion) {
                return React.createElement('div', { className: "text-xl" }, "Loading...");
            }

            if (isFinished) {
                return React.createElement('div', { className: "text-center p-10 rounded-2xl shadow-2xl bg-white" }, [
                    React.createElement('h1', { key: "title", className: "text-5xl font-bold mb-4" }, "Well Done!"),
                    React.createElement('p', { key: "subtitle", className: "text-2xl mb-8" }, "You have completed all the sentences."),
                    React.createElement('button', { key: "restart", onClick: handleRestart, className: "px-8 py-4 bg-yellow-400 text-indigo-800 font-bold rounded-xl shadow-lg hover:bg-yellow-300" }, "Start Over")
                ]);
            }

            return React.createElement('div', { className: "w-full max-w-xl mx-auto" }, [
                React.createElement('header', { key: "header", className: "text-center mb-8 relative" }, [
                    React.createElement('button', { key: "back", onClick: onBack, className: "absolute left-0 top-1/2 -translate-y-1/2 p-2 rounded-full hover:bg-slate-200" }, React.createElement(BackArrowIcon)),
                    React.createElement('h1', { key: "title", className: "text-4xl md:text-5xl font-bold text-slate-800" }, "Sentence Practice")
                ]),
                React.createElement('div', { key: "content", className: "bg-white rounded-2xl shadow-2xl p-6 md:p-10" }, [
                    React.createElement('div', { key: "progress", className: "mb-8" }, [
                        React.createElement('div', { key: "progress-text", className: "flex justify-between items-center mb-2 text-slate-600" }, [
                            React.createElement('span', { key: "label" }, "Progress"),
                            React.createElement('span', { key: "count" }, `Question ${currentIndex + 1} / ${questions.length}`)
                        ]),
                        React.createElement('div', { key: "progress-bar", className: "w-full bg-slate-200 rounded-full h-4" },
                            React.createElement('div', { className: "bg-teal-500 h-4 rounded-full", style: { width: `${((currentIndex + 1) / questions.length) * 100}%` } })
                        )
                    ]),
                    React.createElement('div', { key: "quiz", className: "text-center" }, [
                        React.createElement('p', { key: "korean-label", className: "text-lg text-slate-500 mb-2" }, "Korean"),
                        React.createElement('div', { key: "korean-text", className: "bg-slate-100 rounded-lg p-4 mb-4" },
                            React.createElement('p', { className: "text-3xl font-bold text-slate-700" }, currentQuestion.korean)
                        ),
                        React.createElement('p', { key: "scrambled-label", className: "text-lg text-slate-500 mb-2" }, "Unscramble the words:"),
                        React.createElement('p', { key: "scrambled-words", className: "text-xl font-mono tracking-wide text-teal-700 mb-4 bg-teal-50 p-3 rounded-md" }, currentQuestion.scrambled.join(' / ')),
                        React.createElement('form', { key: "form", onSubmit: handleCheckAnswer }, [
                            React.createElement('input', {
                                key: "input", type: "text", value: userInput, onChange: (e) => setUserInput(e.target.value),
                                placeholder: "Type the correct sentence...", disabled: result === ResultState.CORRECT,
                                className: "w-full p-4 text-xl text-center border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500", autoFocus: true
                            }),
                            result !== ResultState.CORRECT && React.createElement('button', {
                                key: "submit", type: "submit",
                                className: "w-full mt-4 py-4 bg-teal-600 text-white font-bold text-xl rounded-lg shadow-md hover:bg-teal-700"
                            }, "Check Answer")
                        ]),
                        React.createElement('div', { key: "result", className: "mt-6 min-h-[120px]" }, [
                            result === ResultState.CORRECT && React.createElement('div', { key: "correct", className: "text-green-600 bg-green-100 p-4 rounded-lg space-y-4" }, [
                                React.createElement('div', { key: "correct-header", className: "flex items-center justify-center" }, [
                                    React.createElement(CheckIcon, { key: "check" }),
                                    React.createElement('p', { key: "text", className: "font-bold text-2xl ml-2" }, "Correct!")
                                ]),
                                React.createElement('p', { key: "answer", className: "text-xl text-slate-800" }, currentQuestion.answer),
                                React.createElement('button', { key: "next", onClick: handleNextQuestion, className: "w-full mt-2 py-4 bg-green-600 text-white font-bold text-xl rounded-lg shadow-md hover:bg-green-700" }, "Next Question")
                            ]),
                            result === ResultState.INCORRECT && React.createElement('div', { key: "incorrect", className: "text-red-600 bg-red-100 p-4 rounded-lg" }, [
                                React.createElement(CrossIcon, { key: "cross", className: "mx-auto" }),
                                React.createElement('p', { key: "text", className: "font-bold text-xl mt-1" }, "Try again!"),
                                !showHint && React.createElement('button', { key: "hint-btn", onClick: () => setShowHint(true), className: "mt-2 text-sm text-indigo-600 hover:underline" }, "Show Hint"),
                                showHint && React.createElement('div', { key: "hint", className: "mt-2 text-lg font-mono bg-yellow-100 text-yellow-800 p-2 rounded" }, generateHint())
                            ])
                        ])
                    ])
                ])
            ]);
        };

        // 메인 앱 컴포넌트
        const App = () => {
            const [appMode, setAppMode] = useState(AppMode.START);

            const renderContent = () => {
                switch (appMode) {
                    case AppMode.WORD_QUIZ:
                        return React.createElement(WordQuiz, { onBack: () => setAppMode(AppMode.START) });
                    case AppMode.SENTENCE_QUIZ:
                        return React.createElement(SentenceQuiz, { onBack: () => setAppMode(AppMode.START) });
                    case AppMode.START:
                    default:
                        return React.createElement(StartScreen, { onSelectMode: setAppMode });
                }
            };

            return React.createElement('div', {
                className: "min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 flex flex-col items-center justify-center p-4 font-sans"
            }, [
                React.createElement('h1', { key: "main-title", className: "text-2xl font-bold text-slate-700 mb-6" }, "경동초 맞춤형 영어교육 프로그램"),
                React.createElement('div', { key: "content" }, renderContent())
            ]);
        };

        // 앱 렌더링
        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>